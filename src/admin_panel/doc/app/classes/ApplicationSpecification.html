<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html 
     PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>Class: ApplicationSpecification</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="Content-Script-Type" content="text/javascript" />
  <link rel="stylesheet" href=".././rdoc-style.css" type="text/css" media="screen" />
  <script type="text/javascript">
  // <![CDATA[

  function popupCode( url ) {
    window.open(url, "Code", "resizable=yes,scrollbars=yes,toolbar=no,status=no,height=150,width=400")
  }

  function toggleCode( id ) {
    if ( document.getElementById )
      elem = document.getElementById( id );
    else if ( document.all )
      elem = eval( "document.all." + id );
    else
      return false;

    elemStyle = elem.style;
    
    if ( elemStyle.display != "block" ) {
      elemStyle.display = "block"
    } else {
      elemStyle.display = "none"
    }

    return true;
  }
  
  // Make codeblocks hidden by default
  document.writeln( "<style type=\"text/css\">div.method-source-code { display: none }</style>" )
  
  // ]]>
  </script>

</head>
<body>



    <div id="classHeader">
        <table class="header-table">
        <tr class="top-aligned-row">
          <td><strong>Class</strong></td>
          <td class="class-name-in-header">ApplicationSpecification</td>
        </tr>
        <tr class="top-aligned-row">
            <td><strong>In:</strong></td>
            <td>
                <a href="../files/app/models/application_specification_rb.html">
                app/models/application_specification.rb
                </a>
        <br />
            </td>
        </tr>

        <tr class="top-aligned-row">
            <td><strong>Parent:</strong></td>
            <td>
                <a href="PseudoModel.html">
                PseudoModel
               </a>
            </td>
        </tr>
        </table>
    </div>
  <!-- banner header -->

  <div id="bodyContent">



  <div id="contextContent">



   </div>

    <div id="method-list">
      <h3 class="section-bar">Methods</h3>

      <div class="name-list">
      <a href="#M000122">delete</a>&nbsp;&nbsp;
      <a href="#M000123">get_hash</a>&nbsp;&nbsp;
      <a href="#M000119">obj_to_hash</a>&nbsp;&nbsp;
      <a href="#M000120">update</a>&nbsp;&nbsp;
      <a href="#M000121">validate</a>&nbsp;&nbsp;
      <a href="#M000118">write</a>&nbsp;&nbsp;
      </div>
    </div>

  </div>


    <!-- if includes -->

    <div id="section">





      


    <!-- if method_list -->
    <div id="methods">
      <h3 class="section-bar">Public Class methods</h3>

      <div id="method-M000122" class="method-detail">
        <a name="M000122"></a>

        <div class="method-heading">
          <a href="#M000122" class="method-signature">
          <span class="method-name">delete</span><span class="method-args">(app_id)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000122-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000122-source">
<pre>
     <span class="ruby-comment cmt"># File app/models/application_specification.rb, line 273</span>
273:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">delete</span>(<span class="ruby-identifier">app_id</span>)
274:       <span class="ruby-identifier">info</span> = <span class="ruby-constant">YAML</span><span class="ruby-operator">::</span><span class="ruby-identifier">load_file</span>(<span class="ruby-constant">CONFIG_FILE_PATH</span>) <span class="ruby-keyword kw">rescue</span> <span class="ruby-keyword kw">nil</span>
275:       <span class="ruby-identifier">app_name</span> = <span class="ruby-identifier">info</span>[<span class="ruby-value str">'Application Specification'</span>][<span class="ruby-identifier">app_id</span>][<span class="ruby-value str">&quot;name&quot;</span>]
276:       <span class="ruby-identifier">info</span>[<span class="ruby-value str">'Application Specification'</span>].<span class="ruby-identifier">delete_at</span>(<span class="ruby-identifier">app_id</span>)
277:       <span class="ruby-keyword kw">if</span>(<span class="ruby-identifier">info</span>[<span class="ruby-value str">'Application Specification'</span>].<span class="ruby-identifier">length</span> <span class="ruby-operator">==</span> <span class="ruby-value">0</span>)
278:         <span class="ruby-identifier">info</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-value str">'Application Specification'</span>)
279:       <span class="ruby-keyword kw">end</span>       
280:       <span class="ruby-constant">YAMLWriter</span>.<span class="ruby-identifier">write</span>(<span class="ruby-identifier">info</span>,<span class="ruby-constant">CONFIG_FILE_PATH</span>,<span class="ruby-value str">&quot;config&quot;</span>)
281:       <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">app_name</span>
282:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000123" class="method-detail">
        <a name="M000123"></a>

        <div class="method-heading">
          <a href="#M000123" class="method-signature">
          <span class="method-name">get_hash</span><span class="method-args">(application_id = 1000)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
This method is to get application specifications for a specific application
from WebROaR config file.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000123-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000123-source">
<pre>
     <span class="ruby-comment cmt"># File app/models/application_specification.rb, line 285</span>
285:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">get_hash</span>(<span class="ruby-identifier">application_id</span> = <span class="ruby-value">1000</span>)
286:       <span class="ruby-identifier">info</span> = <span class="ruby-constant">YAML</span><span class="ruby-operator">::</span><span class="ruby-identifier">load_file</span>(<span class="ruby-constant">CONFIG_FILE_PATH</span>) <span class="ruby-keyword kw">rescue</span> <span class="ruby-keyword kw">nil</span>
287:       <span class="ruby-identifier">name</span> = <span class="ruby-value str">&quot;&quot;</span>    
288:       <span class="ruby-identifier">path</span> = <span class="ruby-value str">&quot;&quot;</span>
289:       <span class="ruby-identifier">run_as_user</span> = <span class="ruby-value str">&quot;&quot;</span>
290:       <span class="ruby-identifier">type</span> = <span class="ruby-value str">&quot;Rails&quot;</span>
291:       <span class="ruby-identifier">analytics</span> = <span class="ruby-value str">&quot;Disabled&quot;</span>
292:       <span class="ruby-identifier">environment</span> = <span class="ruby-value str">&quot;Production&quot;</span>
293:       <span class="ruby-identifier">port</span>, <span class="ruby-identifier">min_worker</span>, <span class="ruby-identifier">max_worker</span>, <span class="ruby-identifier">log_level</span> = <span class="ruby-constant">ServerSpecification</span>.<span class="ruby-identifier">get_fields</span>
294:       <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">application_id</span>.<span class="ruby-identifier">nil?</span>
295:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">info</span> <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">info</span>[<span class="ruby-value str">'Application Specification'</span>] <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">info</span>[<span class="ruby-value str">'Application Specification'</span>][<span class="ruby-identifier">application_id</span>] 
296:           <span class="ruby-identifier">name</span> = <span class="ruby-identifier">info</span>[<span class="ruby-value str">'Application Specification'</span>][<span class="ruby-identifier">application_id</span>][<span class="ruby-value str">'name'</span>] <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">info</span>[<span class="ruby-value str">'Application Specification'</span>][<span class="ruby-identifier">application_id</span>][<span class="ruby-value str">'name'</span>]
297:           <span class="ruby-identifier">baseuri</span> = <span class="ruby-identifier">info</span>[<span class="ruby-value str">'Application Specification'</span>][<span class="ruby-identifier">application_id</span>][<span class="ruby-value str">'baseuri'</span>] <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">info</span>[<span class="ruby-value str">'Application Specification'</span>][<span class="ruby-identifier">application_id</span>][<span class="ruby-value str">'baseuri'</span>]        
298:           <span class="ruby-identifier">host_names</span> = <span class="ruby-identifier">info</span>[<span class="ruby-value str">'Application Specification'</span>][<span class="ruby-identifier">application_id</span>][<span class="ruby-value str">'host_names'</span>] <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">info</span>[<span class="ruby-value str">'Application Specification'</span>][<span class="ruby-identifier">application_id</span>][<span class="ruby-value str">'host_names'</span>]       
299:           <span class="ruby-identifier">path</span> = <span class="ruby-identifier">info</span>[<span class="ruby-value str">'Application Specification'</span>][<span class="ruby-identifier">application_id</span>][<span class="ruby-value str">'path'</span>] <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">info</span>[<span class="ruby-value str">'Application Specification'</span>][<span class="ruby-identifier">application_id</span>][<span class="ruby-value str">'path'</span>] 
300:           <span class="ruby-identifier">run_as_user</span> = <span class="ruby-identifier">info</span>[<span class="ruby-value str">'Application Specification'</span>][<span class="ruby-identifier">application_id</span>][<span class="ruby-value str">'run_as_user'</span>] <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">info</span>[<span class="ruby-value str">'Application Specification'</span>][<span class="ruby-identifier">application_id</span>][<span class="ruby-value str">'run_as_user'</span>]    
301:           <span class="ruby-identifier">type</span> = <span class="ruby-identifier">info</span>[<span class="ruby-value str">'Application Specification'</span>][<span class="ruby-identifier">application_id</span>][<span class="ruby-value str">'type'</span>].<span class="ruby-identifier">capitalize</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">info</span>[<span class="ruby-value str">'Application Specification'</span>][<span class="ruby-identifier">application_id</span>][<span class="ruby-value str">'type'</span>]
302:           <span class="ruby-identifier">analytics</span> = <span class="ruby-identifier">info</span>[<span class="ruby-value str">'Application Specification'</span>][<span class="ruby-identifier">application_id</span>][<span class="ruby-value str">'analytics'</span>].<span class="ruby-identifier">capitalize</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">info</span>[<span class="ruby-value str">'Application Specification'</span>][<span class="ruby-identifier">application_id</span>][<span class="ruby-value str">'analytics'</span>]
303:           <span class="ruby-identifier">environment</span> = <span class="ruby-identifier">info</span>[<span class="ruby-value str">'Application Specification'</span>][<span class="ruby-identifier">application_id</span>][<span class="ruby-value str">'environment'</span>].<span class="ruby-identifier">capitalize</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">info</span>[<span class="ruby-value str">'Application Specification'</span>][<span class="ruby-identifier">application_id</span>][<span class="ruby-value str">'environment'</span>]
304:           <span class="ruby-identifier">min_worker</span> = <span class="ruby-identifier">info</span>[<span class="ruby-value str">'Application Specification'</span>][<span class="ruby-identifier">application_id</span>][<span class="ruby-value str">'min_worker'</span>] <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">info</span>[<span class="ruby-value str">'Application Specification'</span>][<span class="ruby-identifier">application_id</span>][<span class="ruby-value str">'min_worker'</span>]
305:           <span class="ruby-identifier">max_worker</span> = <span class="ruby-identifier">info</span>[<span class="ruby-value str">'Application Specification'</span>][<span class="ruby-identifier">application_id</span>][<span class="ruby-value str">'max_worker'</span>] <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">info</span>[<span class="ruby-value str">'Application Specification'</span>][<span class="ruby-identifier">application_id</span>][<span class="ruby-value str">'max_worker'</span>]
306:         <span class="ruby-keyword kw">end</span>
307:       <span class="ruby-keyword kw">end</span>
308:       <span class="ruby-identifier">app_hash</span> = <span class="ruby-constant">Hash</span>[<span class="ruby-identifier">:app_id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">application_id</span>.<span class="ruby-identifier">to_i</span>,
309:         <span class="ruby-identifier">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">name</span>,                
310:         <span class="ruby-identifier">:path</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">path</span>,
311:         <span class="ruby-identifier">:run_as_user</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">run_as_user</span>,
312:         <span class="ruby-identifier">:type1</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">type</span>,
313:         <span class="ruby-identifier">:analytics</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">analytics</span>,
314:         <span class="ruby-identifier">:environment</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">environment</span>,
315:         <span class="ruby-identifier">:min_worker</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">min_worker</span>,
316:         <span class="ruby-identifier">:max_worker</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">max_worker</span>]
317:       <span class="ruby-identifier">app_hash</span>[<span class="ruby-identifier">:resolver</span>] = <span class="ruby-identifier">baseuri</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">baseuri</span>
318:       <span class="ruby-identifier">app_hash</span>[<span class="ruby-identifier">:resolver</span>] = <span class="ruby-identifier">host_names</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">host_names</span>
319: 
320:       <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">app_hash</span>  
321:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <h3 class="section-bar">Public Instance methods</h3>

      <div id="method-M000119" class="method-detail">
        <a name="M000119"></a>

        <div class="method-heading">
          <a href="#M000119" class="method-signature">
          <span class="method-name">obj_to_hash</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Converting <a
href="ApplicationSpecification.html">ApplicationSpecification</a> obeject
into a Hash.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000119-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000119-source">
<pre>
    <span class="ruby-comment cmt"># File app/models/application_specification.rb, line 62</span>
62:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">obj_to_hash</span>
63:     <span class="ruby-identifier">app</span> = <span class="ruby-constant">Hash</span>[<span class="ruby-value str">&quot;name&quot;</span>=<span class="ruby-operator">&gt;</span><span class="ruby-identifier">name</span>,<span class="ruby-value str">&quot;path&quot;</span>=<span class="ruby-operator">&gt;</span><span class="ruby-identifier">path</span>,<span class="ruby-value str">&quot;run_as_user&quot;</span>=<span class="ruby-operator">&gt;</span><span class="ruby-identifier">run_as_user</span>.<span class="ruby-identifier">downcase</span>,<span class="ruby-value str">&quot;type&quot;</span>=<span class="ruby-operator">&gt;</span><span class="ruby-identifier">type1</span>.<span class="ruby-identifier">downcase</span>,
64:       <span class="ruby-value str">&quot;analytics&quot;</span>=<span class="ruby-operator">&gt;</span><span class="ruby-identifier">analytics</span>.<span class="ruby-identifier">to_s</span>.<span class="ruby-identifier">downcase</span>,<span class="ruby-value str">&quot;environment&quot;</span>=<span class="ruby-operator">&gt;</span><span class="ruby-identifier">environment</span>.<span class="ruby-identifier">downcase</span>,<span class="ruby-value str">&quot;min_worker&quot;</span>=<span class="ruby-operator">&gt;</span><span class="ruby-identifier">min_worker</span>.<span class="ruby-identifier">to_i</span>,
65:       <span class="ruby-value str">&quot;max_worker&quot;</span>=<span class="ruby-operator">&gt;</span><span class="ruby-identifier">max_worker</span>.<span class="ruby-identifier">to_i</span>]
66:     <span class="ruby-identifier">app</span>[<span class="ruby-value str">&quot;baseuri&quot;</span>] = <span class="ruby-identifier">baseuri</span>.<span class="ruby-identifier">strip</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">baseuri</span>
67:     <span class="ruby-identifier">app</span>[<span class="ruby-value str">&quot;host_names&quot;</span>] = <span class="ruby-identifier">host_names</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">host_names</span>
68:     <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">app</span>
69:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000120" class="method-detail">
        <a name="M000120"></a>

        <div class="method-heading">
          <a href="#M000120" class="method-signature">
          <span class="method-name">update</span><span class="method-args">(app_id)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000120-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000120-source">
<pre>
    <span class="ruby-comment cmt"># File app/models/application_specification.rb, line 71</span>
71:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">update</span>(<span class="ruby-identifier">app_id</span>)
72:     <span class="ruby-identifier">info</span>=<span class="ruby-constant">YAML</span><span class="ruby-operator">::</span><span class="ruby-identifier">load_file</span>(<span class="ruby-constant">CONFIG_FILE_PATH</span>) <span class="ruby-keyword kw">rescue</span> <span class="ruby-keyword kw">nil</span>
73:     <span class="ruby-identifier">info</span>[<span class="ruby-value str">'Application Specification'</span>][<span class="ruby-identifier">app_id</span>] = <span class="ruby-identifier">obj_to_hash</span>     
74:     <span class="ruby-constant">YAMLWriter</span>.<span class="ruby-identifier">write</span>(<span class="ruby-identifier">info</span>, <span class="ruby-constant">CONFIG_FILE_PATH</span>, <span class="ruby-value str">&quot;config&quot;</span>)
75:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000121" class="method-detail">
        <a name="M000121"></a>

        <div class="method-heading">
          <a href="#M000121" class="method-signature">
          <span class="method-name">validate</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
this method is used to <a
href="ApplicationSpecification.html#M000121">validate</a> the various
fields of the apps model.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000121-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000121-source">
<pre>
     <span class="ruby-comment cmt"># File app/models/application_specification.rb, line 78</span>
 78:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">validate</span>     
 79:     <span class="ruby-identifier">errors</span>.<span class="ruby-identifier">add_to_base</span> <span class="ruby-constant">MIN_WORKERS_VALIDATION</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">min_worker</span>.<span class="ruby-identifier">to_i</span><span class="ruby-operator">&gt;</span><span class="ruby-value">20</span>
 80:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">max_worker</span>.<span class="ruby-identifier">to_i</span> <span class="ruby-operator">&lt;</span> <span class="ruby-identifier">min_worker</span>.<span class="ruby-identifier">to_i</span>
 81:       <span class="ruby-identifier">errors</span>.<span class="ruby-identifier">add_to_base</span> <span class="ruby-constant">MAX_WORKERS_VALIDATION_1</span>
 82:     <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">max_worker</span>.<span class="ruby-identifier">to_i</span><span class="ruby-operator">&gt;</span><span class="ruby-value">20</span>
 83:       <span class="ruby-identifier">errors</span>.<span class="ruby-identifier">add_to_base</span> <span class="ruby-constant">MAX_WORKERS_VALIDATION_2</span>
 84:     <span class="ruby-keyword kw">end</span>
 85:     <span class="ruby-identifier">errors</span>.<span class="ruby-identifier">add_to_base</span> <span class="ruby-constant">APPLICATION_PATH_EXISTANCE_VALIDATION</span> <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-constant">File</span>.<span class="ruby-identifier">directory?</span>(<span class="ruby-identifier">path</span>)
 86:     <span class="ruby-identifier">errors</span>.<span class="ruby-identifier">add_to_base</span> <span class="ruby-constant">ANALYTICS_VALIDATION</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">type1</span><span class="ruby-operator">==</span><span class="ruby-value str">&quot;Rails&quot;</span> <span class="ruby-keyword kw">and</span> <span class="ruby-operator">!</span>(<span class="ruby-identifier">analytics</span>.<span class="ruby-identifier">downcase</span> <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;enabled&quot;</span> <span class="ruby-keyword kw">or</span> <span class="ruby-identifier">analytics</span>.<span class="ruby-identifier">downcase</span> <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;disabled&quot;</span>)
 87:     <span class="ruby-identifier">errors</span>.<span class="ruby-identifier">add_to_base</span> <span class="ruby-constant">ENVIRONMENT_VALIDATION</span> <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span>(<span class="ruby-identifier">environment</span>.<span class="ruby-identifier">downcase</span> <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;production&quot;</span> <span class="ruby-keyword kw">or</span> <span class="ruby-identifier">environment</span>.<span class="ruby-identifier">downcase</span> <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;development&quot;</span> <span class="ruby-keyword kw">or</span> <span class="ruby-identifier">environment</span>.<span class="ruby-identifier">downcase</span> <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;test&quot;</span>)
 88:     <span class="ruby-identifier">errors</span>.<span class="ruby-identifier">add_to_base</span> <span class="ruby-constant">TYPE_VALIDATION</span> <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span>(<span class="ruby-identifier">type1</span>.<span class="ruby-identifier">downcase</span> <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;rails&quot;</span> <span class="ruby-keyword kw">or</span> <span class="ruby-identifier">type1</span>.<span class="ruby-identifier">downcase</span> <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;rack&quot;</span>)
 89:       
 90:     <span class="ruby-comment cmt"># Resolver take either baseuri or host_names, not both. </span>
 91:     <span class="ruby-comment cmt"># baseuri starts with '/'      </span>
 92:     <span class="ruby-identifier">tokens</span> = <span class="ruby-identifier">resolver</span>.<span class="ruby-identifier">split</span>(<span class="ruby-regexp re">/ /</span>)
 93:       
 94:     <span class="ruby-identifier">curr_host_names</span> = []
 95:     <span class="ruby-identifier">host_names_flag</span> = <span class="ruby-value">0</span>
 96:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">tokens</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">==</span> <span class="ruby-value">1</span> <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">tokens</span>[<span class="ruby-value">0</span>].<span class="ruby-identifier">start_with?</span>(<span class="ruby-value str">'/'</span>)
 97:       <span class="ruby-identifier">write_attribute</span>(<span class="ruby-identifier">:baseuri</span>,<span class="ruby-identifier">resolver</span>)
 98:       <span class="ruby-identifier">errors</span>.<span class="ruby-identifier">add_to_base</span> <span class="ruby-value str">&quot;BaseURI must start with '/' and contains characters A-Z, a-z, 0-9 , _ , -  and /.&quot;</span> <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span>(<span class="ruby-identifier">baseuri</span>.<span class="ruby-identifier">strip</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/^\/[A-Za-z0-9_\-\/]*$/i</span>)
 99:     <span class="ruby-keyword kw">else</span>
100:       <span class="ruby-identifier">write_attribute</span>(<span class="ruby-identifier">:host_names</span>,<span class="ruby-identifier">resolver</span>)
101:       <span class="ruby-identifier">host_name_flag</span> = <span class="ruby-value">1</span>
102:     <span class="ruby-keyword kw">end</span>
103:     <span class="ruby-comment cmt"># More than one token would come only in case of host_names</span>
104:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">host_name_flag</span> <span class="ruby-operator">==</span> <span class="ruby-value">1</span> <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">tokens</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>
105:       <span class="ruby-identifier">tokens</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">token</span><span class="ruby-operator">|</span>
106:         <span class="ruby-keyword kw">next</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">token</span> <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;&quot;</span>
107:         <span class="ruby-identifier">len</span> = <span class="ruby-identifier">token</span>.<span class="ruby-identifier">size</span>
108:         <span class="ruby-comment cmt"># Whole name can not exceed total length of 253</span>
109:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">len</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">253</span>
110:           <span class="ruby-identifier">errors</span>.<span class="ruby-identifier">add_to_base</span> <span class="ruby-constant">HOSTNAME_LENGTH_EXCEEDS</span>
111:           <span class="ruby-keyword kw">next</span>
112:         <span class="ruby-keyword kw">end</span>          
113:         <span class="ruby-comment cmt"># Subdivision can go down to maximum 127 level.</span>
114:         <span class="ruby-identifier">labels</span> = <span class="ruby-identifier">token</span>.<span class="ruby-identifier">split</span>(<span class="ruby-regexp re">/\./</span>)
115:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">labels</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">127</span>
116:           <span class="ruby-identifier">errors</span>.<span class="ruby-identifier">add_to_base</span> <span class="ruby-constant">SUBDIVISION_EXCEEDS_127</span>
117:           <span class="ruby-keyword kw">next</span>
118:         <span class="ruby-keyword kw">end</span>
119:         <span class="ruby-comment cmt"># Start with '/' indicates BaseURI</span>
120:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">token</span>.<span class="ruby-identifier">start_with?</span>(<span class="ruby-value str">'/'</span>)
121:           <span class="ruby-identifier">errors</span>.<span class="ruby-identifier">add_to_base</span> <span class="ruby-constant">BASEURI_AND_HOSTNAMES_EXIST</span>
122:           <span class="ruby-keyword kw">break</span>
123:         <span class="ruby-keyword kw">end</span>
124:         <span class="ruby-comment cmt"># If wildcard '*' presents, Hostname should prefix with '~'</span>
125:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">token</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-value str">&quot;*&quot;</span>) <span class="ruby-keyword kw">and</span> <span class="ruby-operator">!</span>(<span class="ruby-identifier">token</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/^~/</span>)
126:           <span class="ruby-identifier">errors</span>.<span class="ruby-identifier">add_to_base</span> <span class="ruby-node">&quot;#{token} - #{START_WTIH_TILD}&quot;</span>   
127:           <span class="ruby-keyword kw">next</span>         
128:         <span class="ruby-keyword kw">end</span>
129:         <span class="ruby-comment cmt"># Wildcard '*' can come either at start or at end, not inbetween</span>
130:         <span class="ruby-identifier">pos</span> = <span class="ruby-identifier">token</span>.<span class="ruby-identifier">index</span>(<span class="ruby-value str">'*'</span>,<span class="ruby-value">1</span>)
131:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">pos</span> <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">pos</span> <span class="ruby-operator">!=</span> <span class="ruby-value">1</span> <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">pos</span> <span class="ruby-operator">!=</span> <span class="ruby-identifier">len</span><span class="ruby-operator">-</span><span class="ruby-value">1</span>
132:           <span class="ruby-identifier">errors</span>.<span class="ruby-identifier">add_to_base</span> <span class="ruby-node">&quot;#{token} - #{WILDCARD_AT_START_OR_END}&quot;</span>
133:           <span class="ruby-keyword kw">next</span>
134:         <span class="ruby-keyword kw">end</span>
135:         <span class="ruby-identifier">pos</span> = <span class="ruby-identifier">token</span>.<span class="ruby-identifier">index</span>(<span class="ruby-value str">'*'</span>,<span class="ruby-value">2</span>)
136:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">pos</span> <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">pos</span> <span class="ruby-operator">!=</span> <span class="ruby-identifier">len</span><span class="ruby-operator">-</span><span class="ruby-value">1</span>
137:           <span class="ruby-identifier">errors</span>.<span class="ruby-identifier">add_to_base</span> <span class="ruby-node">&quot;#{token} - #{WILDCARD_AT_START_OR_END}&quot;</span>
138:           <span class="ruby-keyword kw">next</span>
139:         <span class="ruby-keyword kw">end</span>
140:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">token</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/[.][.]/</span>
141:           <span class="ruby-identifier">errors</span>.<span class="ruby-identifier">add_to_base</span> <span class="ruby-node">&quot;#{token} - #{CONSECUTIVE_DOTS}&quot;</span>
142:           <span class="ruby-keyword kw">next</span>
143:         <span class="ruby-keyword kw">end</span>
144:         <span class="ruby-comment cmt"># Check for Letters, Digits and Hyphen</span>
145:         <span class="ruby-identifier">err_flag</span> = <span class="ruby-value">0</span>
146:         <span class="ruby-comment cmt">#first label can have '~' as first char and '*' as second char, last label can have '*' as last character</span>
147:         <span class="ruby-identifier">first_label</span> = <span class="ruby-identifier">labels</span>[<span class="ruby-value">0</span>]              
148:         <span class="ruby-identifier">last_label</span> = <span class="ruby-identifier">labels</span>[<span class="ruby-identifier">labels</span>.<span class="ruby-identifier">size</span><span class="ruby-operator">-</span><span class="ruby-value">1</span>]
149:         <span class="ruby-identifier">labels</span> = <span class="ruby-identifier">labels</span>[<span class="ruby-value">1</span><span class="ruby-operator">..</span><span class="ruby-identifier">labels</span>.<span class="ruby-identifier">size</span><span class="ruby-operator">-</span><span class="ruby-value">2</span>]
150:         <span class="ruby-identifier">labels</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">label</span><span class="ruby-operator">|</span>
151:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">label</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">63</span>
152:             <span class="ruby-identifier">errors</span>.<span class="ruby-identifier">add_to_base</span> <span class="ruby-constant">LABEL_LENGTH_EXCEEDS</span>
153:             <span class="ruby-keyword kw">next</span>
154:           <span class="ruby-keyword kw">end</span>
155:           <span class="ruby-identifier">label</span>.<span class="ruby-identifier">each_char</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">c</span><span class="ruby-operator">|</span>
156:             <span class="ruby-keyword kw">if</span> (<span class="ruby-identifier">c</span><span class="ruby-operator">&gt;=</span><span class="ruby-value str">'a'</span> <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">c</span><span class="ruby-operator">&lt;=</span><span class="ruby-value str">'z'</span>) <span class="ruby-keyword kw">or</span> (<span class="ruby-identifier">c</span><span class="ruby-operator">&gt;=</span><span class="ruby-value str">'A'</span> <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">c</span><span class="ruby-operator">&lt;=</span><span class="ruby-value str">'Z'</span>) <span class="ruby-keyword kw">or</span> (<span class="ruby-identifier">c</span><span class="ruby-operator">&gt;=</span><span class="ruby-value str">'0'</span> <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">c</span><span class="ruby-operator">&lt;=</span><span class="ruby-value str">'9'</span>) <span class="ruby-keyword kw">or</span> <span class="ruby-identifier">c</span><span class="ruby-operator">==</span><span class="ruby-value str">'-'</span> 
157:               <span class="ruby-keyword kw">next</span>
158:             <span class="ruby-keyword kw">else</span>
159:               <span class="ruby-identifier">errors</span>.<span class="ruby-identifier">add_to_base</span> <span class="ruby-constant">HOSTNAME_LDH</span> 
160:               <span class="ruby-identifier">err_flag</span> = <span class="ruby-value">1</span>
161:               <span class="ruby-keyword kw">break</span>;
162:             <span class="ruby-keyword kw">end</span>
163:           <span class="ruby-keyword kw">end</span>
164:         <span class="ruby-keyword kw">end</span>
165:         <span class="ruby-identifier">char_array</span> = []
166:         <span class="ruby-identifier">first_label</span>.<span class="ruby-identifier">each_char</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">c</span><span class="ruby-operator">|</span>
167:           <span class="ruby-identifier">char_array</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">c</span>
168:         <span class="ruby-keyword kw">end</span>
169:         <span class="ruby-comment cmt">#p char_array</span>
170:         <span class="ruby-comment cmt"># checking first character of first label against LDH and ~</span>
171:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">err_flag</span> <span class="ruby-operator">==</span> <span class="ruby-value">0</span>            
172:           <span class="ruby-identifier">c</span> = <span class="ruby-identifier">char_array</span>[<span class="ruby-value">0</span>]
173:           <span class="ruby-keyword kw">if</span> (<span class="ruby-identifier">c</span><span class="ruby-operator">&gt;=</span><span class="ruby-value str">'a'</span> <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">c</span><span class="ruby-operator">&lt;=</span><span class="ruby-value str">'z'</span>) <span class="ruby-keyword kw">or</span> (<span class="ruby-identifier">c</span><span class="ruby-operator">&gt;=</span><span class="ruby-value str">'A'</span> <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">c</span><span class="ruby-operator">&lt;=</span><span class="ruby-value str">'Z'</span>) <span class="ruby-keyword kw">or</span> (<span class="ruby-identifier">c</span><span class="ruby-operator">&gt;=</span><span class="ruby-value str">'0'</span> <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">c</span><span class="ruby-operator">&lt;=</span><span class="ruby-value str">'9'</span>) <span class="ruby-keyword kw">or</span> <span class="ruby-identifier">c</span><span class="ruby-operator">==</span><span class="ruby-value str">'~'</span>             
174:           <span class="ruby-keyword kw">else</span>
175:             <span class="ruby-identifier">errors</span>.<span class="ruby-identifier">add_to_base</span> <span class="ruby-constant">HOSTNAME_LDH</span>
176:             <span class="ruby-identifier">err_flag</span> = <span class="ruby-value">1</span>
177:           <span class="ruby-keyword kw">end</span>
178:         <span class="ruby-keyword kw">end</span>
179:         <span class="ruby-comment cmt">#checking second char of first label against LDH and *</span>
180:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">err_flag</span> <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
181:           <span class="ruby-identifier">c</span> = <span class="ruby-identifier">char_array</span>[<span class="ruby-value">1</span>]
182:           <span class="ruby-keyword kw">if</span> (<span class="ruby-identifier">c</span><span class="ruby-operator">&gt;=</span><span class="ruby-value str">'a'</span> <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">c</span><span class="ruby-operator">&lt;=</span><span class="ruby-value str">'z'</span>) <span class="ruby-keyword kw">or</span> (<span class="ruby-identifier">c</span><span class="ruby-operator">&gt;=</span><span class="ruby-value str">'A'</span> <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">c</span><span class="ruby-operator">&lt;=</span><span class="ruby-value str">'Z'</span>) <span class="ruby-keyword kw">or</span> (<span class="ruby-identifier">c</span><span class="ruby-operator">&gt;=</span><span class="ruby-value str">'0'</span> <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">c</span><span class="ruby-operator">&lt;=</span><span class="ruby-value str">'9'</span>) <span class="ruby-keyword kw">or</span> <span class="ruby-identifier">c</span><span class="ruby-operator">==</span><span class="ruby-value str">'*'</span>             
183:           <span class="ruby-keyword kw">else</span>
184:             <span class="ruby-identifier">errors</span>.<span class="ruby-identifier">add_to_base</span> <span class="ruby-constant">HOSTNAME_LDH</span>
185:             <span class="ruby-identifier">err_flag</span> = <span class="ruby-value">1</span>
186:           <span class="ruby-keyword kw">end</span>
187:         <span class="ruby-keyword kw">end</span>
188:         <span class="ruby-comment cmt">#checking remaining character of first label against LDH</span>
189:         <span class="ruby-identifier">char_array</span> = <span class="ruby-identifier">char_array</span>[<span class="ruby-value">2</span><span class="ruby-operator">..</span><span class="ruby-identifier">char_array</span>.<span class="ruby-identifier">size</span><span class="ruby-operator">-</span><span class="ruby-value">1</span>]
190:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">err_flag</span> <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
191:           <span class="ruby-identifier">char_array</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">c</span><span class="ruby-operator">|</span> 
192:             <span class="ruby-keyword kw">if</span> (<span class="ruby-identifier">c</span><span class="ruby-operator">&gt;=</span><span class="ruby-value str">'a'</span> <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">c</span><span class="ruby-operator">&lt;=</span><span class="ruby-value str">'z'</span>) <span class="ruby-keyword kw">or</span> (<span class="ruby-identifier">c</span><span class="ruby-operator">&gt;=</span><span class="ruby-value str">'A'</span> <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">c</span><span class="ruby-operator">&lt;=</span><span class="ruby-value str">'Z'</span>) <span class="ruby-keyword kw">or</span> (<span class="ruby-identifier">c</span><span class="ruby-operator">&gt;=</span><span class="ruby-value str">'0'</span> <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">c</span><span class="ruby-operator">&lt;=</span><span class="ruby-value str">'9'</span>) <span class="ruby-keyword kw">or</span> <span class="ruby-identifier">c</span><span class="ruby-operator">==</span><span class="ruby-value str">'-'</span> 
193:               <span class="ruby-keyword kw">next</span>
194:             <span class="ruby-keyword kw">else</span>
195:               <span class="ruby-identifier">errors</span>.<span class="ruby-identifier">add_to_base</span> <span class="ruby-constant">HOSTNAME_LDH</span> 
196:               <span class="ruby-identifier">err_flag</span> = <span class="ruby-value">1</span>
197:               <span class="ruby-keyword kw">break</span>;
198:             <span class="ruby-keyword kw">end</span>
199:           <span class="ruby-keyword kw">end</span>            
200:         <span class="ruby-keyword kw">end</span>
201:         <span class="ruby-comment cmt">#checking last character of last label against LDH and *</span>
202:         <span class="ruby-identifier">char_array</span> = []
203:         <span class="ruby-identifier">last_label</span>.<span class="ruby-identifier">each_char</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">c</span><span class="ruby-operator">|</span>
204:           <span class="ruby-identifier">char_array</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">c</span>
205:         <span class="ruby-keyword kw">end</span>
206:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">err_flag</span> <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
207:           <span class="ruby-identifier">c</span> = <span class="ruby-identifier">char_array</span>[<span class="ruby-identifier">char_array</span>.<span class="ruby-identifier">size</span><span class="ruby-operator">-</span><span class="ruby-value">1</span>]
208:           <span class="ruby-keyword kw">if</span> (<span class="ruby-identifier">c</span><span class="ruby-operator">&gt;=</span><span class="ruby-value str">'a'</span> <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">c</span><span class="ruby-operator">&lt;=</span><span class="ruby-value str">'z'</span>) <span class="ruby-keyword kw">or</span> (<span class="ruby-identifier">c</span><span class="ruby-operator">&gt;=</span><span class="ruby-value str">'A'</span> <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">c</span><span class="ruby-operator">&lt;=</span><span class="ruby-value str">'Z'</span>) <span class="ruby-keyword kw">or</span> (<span class="ruby-identifier">c</span><span class="ruby-operator">&gt;=</span><span class="ruby-value str">'0'</span> <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">c</span><span class="ruby-operator">&lt;=</span><span class="ruby-value str">'9'</span>) <span class="ruby-keyword kw">or</span> <span class="ruby-identifier">c</span><span class="ruby-operator">==</span><span class="ruby-value str">'*'</span>             
209:           <span class="ruby-keyword kw">else</span>
210:             <span class="ruby-identifier">errors</span>.<span class="ruby-identifier">add_to_base</span> <span class="ruby-constant">HOSTNAME_LDH</span>
211:             <span class="ruby-identifier">err_flag</span> = <span class="ruby-value">1</span>
212:           <span class="ruby-keyword kw">end</span>
213:         <span class="ruby-keyword kw">end</span>
214:         <span class="ruby-comment cmt">#checking remaining characters of the last label against LDH</span>
215:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">err_flag</span> <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
216:           <span class="ruby-identifier">char_array</span> = <span class="ruby-identifier">char_array</span>[<span class="ruby-value">1</span><span class="ruby-operator">..</span><span class="ruby-identifier">char_array</span>.<span class="ruby-identifier">size</span><span class="ruby-operator">-</span><span class="ruby-value">2</span>]
217:           <span class="ruby-identifier">char_array</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">c</span><span class="ruby-operator">|</span>
218:             <span class="ruby-keyword kw">if</span> (<span class="ruby-identifier">c</span><span class="ruby-operator">&gt;=</span><span class="ruby-value str">'a'</span> <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">c</span><span class="ruby-operator">&lt;=</span><span class="ruby-value str">'z'</span>) <span class="ruby-keyword kw">or</span> (<span class="ruby-identifier">c</span><span class="ruby-operator">&gt;=</span><span class="ruby-value str">'A'</span> <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">c</span><span class="ruby-operator">&lt;=</span><span class="ruby-value str">'Z'</span>) <span class="ruby-keyword kw">or</span> (<span class="ruby-identifier">c</span><span class="ruby-operator">&gt;=</span><span class="ruby-value str">'0'</span> <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">c</span><span class="ruby-operator">&lt;=</span><span class="ruby-value str">'9'</span>) <span class="ruby-keyword kw">or</span> <span class="ruby-identifier">c</span><span class="ruby-operator">==</span><span class="ruby-value str">'*'</span>             
219:             <span class="ruby-keyword kw">else</span>
220:               <span class="ruby-identifier">errors</span>.<span class="ruby-identifier">add_to_base</span> <span class="ruby-constant">HOSTNAME_LDH</span>
221:               <span class="ruby-identifier">err_flag</span> = <span class="ruby-value">1</span>
222:             <span class="ruby-keyword kw">end</span>
223:           <span class="ruby-keyword kw">end</span>            
224:         <span class="ruby-keyword kw">end</span>
225:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">err_flag</span> <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
226:           <span class="ruby-identifier">curr_host_names</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">token</span>
227:         <span class="ruby-keyword kw">end</span>
228:       <span class="ruby-keyword kw">end</span>
229:     <span class="ruby-keyword kw">end</span>
230:     
231:     <span class="ruby-comment cmt">#BaseURI can not be /admin-panel</span>
232:     <span class="ruby-identifier">errors</span>.<span class="ruby-identifier">add_to_base</span> <span class="ruby-constant">BASEURI_AS_ADMIN_PANEL_BASEURI_VALIDATION</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">baseuri</span> <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">baseuri</span>.<span class="ruby-identifier">strip</span> <span class="ruby-operator">==</span> <span class="ruby-constant">ADMIN_PANEL_BASE_URI</span>
233:     <span class="ruby-identifier">all_host_names</span> = []
234:     <span class="ruby-identifier">curr_host_names_size</span> = <span class="ruby-identifier">curr_host_names</span>.<span class="ruby-identifier">size</span>
235:       
236:     <span class="ruby-comment cmt">#checking uniqueness of BaseURI</span>
237:     <span class="ruby-identifier">info</span>= <span class="ruby-constant">YAML</span><span class="ruby-operator">::</span><span class="ruby-identifier">load_file</span>(<span class="ruby-constant">CONFIG_FILE_PATH</span>)
238:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">info</span> <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">info</span>[<span class="ruby-value str">'Application Specification'</span>]
239:       <span class="ruby-identifier">i</span>=<span class="ruby-value">0</span>
240:       <span class="ruby-identifier">flag</span>=<span class="ruby-value">0</span>
241:       <span class="ruby-keyword kw">while</span>(<span class="ruby-identifier">info</span>[<span class="ruby-value str">'Application Specification'</span>][<span class="ruby-identifier">i</span>])
242:         <span class="ruby-identifier">flag</span>=<span class="ruby-value">1</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">baseuri</span> <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">baseuri</span>.<span class="ruby-identifier">strip</span> <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">info</span>[<span class="ruby-value str">'Application Specification'</span>][<span class="ruby-identifier">i</span>][<span class="ruby-value str">'baseuri'</span>] <span class="ruby-operator">==</span> <span class="ruby-identifier">baseuri</span>.<span class="ruby-identifier">strip</span> <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">app_id</span>.<span class="ruby-identifier">to_i</span> <span class="ruby-operator">!=</span> <span class="ruby-identifier">i</span>.<span class="ruby-identifier">to_i</span>
243:         <span class="ruby-identifier">errors</span>.<span class="ruby-identifier">add_to_base</span> <span class="ruby-node">&quot;#{name} - #{APPLICATION_NAME_REPEATED}&quot;</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">info</span>[<span class="ruby-value str">'Application Specification'</span>][<span class="ruby-identifier">i</span>][<span class="ruby-value str">'name'</span>] <span class="ruby-operator">==</span> <span class="ruby-identifier">name</span> <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">app_id</span>.<span class="ruby-identifier">to_i</span> <span class="ruby-operator">!=</span> <span class="ruby-identifier">i</span>.<span class="ruby-identifier">to_i</span>
244:         <span class="ruby-identifier">all_host_names</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">info</span>[<span class="ruby-value str">'Application Specification'</span>][<span class="ruby-identifier">i</span>][<span class="ruby-value str">'host_names'</span>].<span class="ruby-identifier">split</span>(<span class="ruby-regexp re">/ /</span>) <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">info</span>[<span class="ruby-value str">'Application Specification'</span>][<span class="ruby-identifier">i</span>][<span class="ruby-value str">'host_names'</span>] <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">curr_host_names_size</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span> <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">app_id</span>.<span class="ruby-identifier">to_i</span> <span class="ruby-operator">!=</span> <span class="ruby-identifier">i</span>.<span class="ruby-identifier">to_i</span>
245:         <span class="ruby-identifier">i</span><span class="ruby-operator">+=</span><span class="ruby-value">1</span>
246:       <span class="ruby-keyword kw">end</span>        
247:       <span class="ruby-identifier">errors</span>.<span class="ruby-identifier">add_to_base</span> <span class="ruby-constant">BASEURI_EXISTANCE_VALIDATION</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">flag</span><span class="ruby-operator">==</span><span class="ruby-value">1</span>
248:     <span class="ruby-keyword kw">end</span>
249:     <span class="ruby-identifier">all_host_names</span>.<span class="ruby-identifier">flatten!</span>
250:     <span class="ruby-comment cmt">#puts &quot;all=#{all_host_names}&quot;</span>
251:     <span class="ruby-comment cmt">#puts &quot;curr=#{curr_host_names}&quot;</span>
252:     <span class="ruby-comment cmt"># checking uniqueness of Hostnames</span>
253:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">curr_host_names_size</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>
254:       <span class="ruby-identifier">errors</span>.<span class="ruby-identifier">add_to_base</span> <span class="ruby-constant">HOSTNAME_REPEATED</span>  <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">curr_host_names_size</span> <span class="ruby-operator">!=</span> <span class="ruby-identifier">curr_host_names</span>.<span class="ruby-identifier">uniq</span>.<span class="ruby-identifier">size</span>
255:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">all_host_names</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>
256:         <span class="ruby-identifier">curr_host_names</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">c_host_name</span><span class="ruby-operator">|</span>
257:           <span class="ruby-comment cmt">#p c_host_name</span>
258:           <span class="ruby-comment cmt">#p c_host_name.length</span>
259:           <span class="ruby-identifier">all_host_names</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">host_name</span><span class="ruby-operator">|</span>
260:             <span class="ruby-comment cmt">#p host_name</span>
261:             <span class="ruby-comment cmt">#p host_name.length</span>
262:             <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">c_host_name</span>.<span class="ruby-identifier">eql?</span>(<span class="ruby-identifier">host_name</span>)
263:               <span class="ruby-identifier">errors</span>.<span class="ruby-identifier">add_to_base</span> <span class="ruby-node">&quot;#{c_host_name}-#{HOSTNAME_REPEATED }&quot;</span>
264:               <span class="ruby-keyword kw">break</span>
265:             <span class="ruby-keyword kw">end</span>
266:           <span class="ruby-keyword kw">end</span>
267:         <span class="ruby-keyword kw">end</span>
268:       <span class="ruby-keyword kw">end</span>
269:     <span class="ruby-keyword kw">end</span>      
270:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000118" class="method-detail">
        <a name="M000118"></a>

        <div class="method-heading">
          <a href="#M000118" class="method-signature">
          <span class="method-name">write</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
validates_format_of :baseuri, :with =&gt;
/^\/[A-Za-z0-9_\-\/]*$/i,:message=&gt;&quot;must start with &#8217;/&#8217;
and contains characters A-Z, a-z, 0-9 , _ , - and /.&quot;
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000118-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000118-source">
<pre>
    <span class="ruby-comment cmt"># File app/models/application_specification.rb, line 43</span>
43:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">write</span>
44:     <span class="ruby-identifier">server_specification</span> = <span class="ruby-constant">ServerSpecification</span>.<span class="ruby-identifier">get_hash</span>
45:     <span class="ruby-identifier">info</span>= <span class="ruby-constant">YAML</span><span class="ruby-operator">::</span><span class="ruby-identifier">load_file</span>(<span class="ruby-constant">CONFIG_FILE_PATH</span>) <span class="ruby-keyword kw">rescue</span> <span class="ruby-keyword kw">nil</span>
46:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">info</span> 
47:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">info</span>[<span class="ruby-value str">'Application Specification'</span>]
48:         <span class="ruby-identifier">i</span>=<span class="ruby-identifier">info</span>[<span class="ruby-value str">'Application Specification'</span>].<span class="ruby-identifier">size</span>
49:         <span class="ruby-identifier">info</span>[<span class="ruby-value str">'Application Specification'</span>][<span class="ruby-identifier">i</span>] = <span class="ruby-identifier">obj_to_hash</span>
50:         <span class="ruby-identifier">data</span>=<span class="ruby-identifier">info</span>[<span class="ruby-value str">'Application Specification'</span>]
51:       <span class="ruby-keyword kw">else</span>
52:         <span class="ruby-identifier">data</span> = <span class="ruby-constant">Array</span>[<span class="ruby-identifier">obj_to_hash</span>]
53:       <span class="ruby-keyword kw">end</span>
54:     <span class="ruby-keyword kw">else</span>
55:       <span class="ruby-identifier">data</span> = <span class="ruby-constant">Array</span>[<span class="ruby-identifier">obj_to_hash</span>]
56:     <span class="ruby-keyword kw">end</span>
57:     <span class="ruby-identifier">info</span> = <span class="ruby-constant">Hash</span>[<span class="ruby-value str">'Server Specification'</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">server_specification</span>, <span class="ruby-value str">'Application Specification'</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">data</span>]
58:     <span class="ruby-constant">YAMLWriter</span>.<span class="ruby-identifier">write</span>(<span class="ruby-identifier">info</span>, <span class="ruby-constant">CONFIG_FILE_PATH</span>, <span class="ruby-value str">&quot;config&quot;</span>)
59:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>


    </div>


  </div>


<div id="validator-badges">
  <p><small><a href="http://validator.w3.org/check/referer">[Validate]</a></small></p>
</div>

</body>
</html>